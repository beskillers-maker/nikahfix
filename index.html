<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NikahFix | Premuim Matrimonial Theme</title>
    
    <style>
        /* THEME SETTINGS */
        :root { 
            --primary: #e91e63; /* Pink */
            --primary-dark: #c2185b;
            --secondary: #1f2937; /* Dark Blue/Gray */
            --accent: #3498db; /* Verified Blue */
            --bg-light: #f8fafc;
            --white: #ffffff;
            --shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        body { font-family: 'Segoe UI', Roboto, sans-serif; margin: 0; background: var(--bg-light); color: var(--secondary); overflow-x: hidden; }

        /* Unified Navbar */
        .navbar { background: var(--white); padding: 15px 8%; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000; }
        .logo { font-size: 26px; font-weight: 800; cursor: pointer; text-decoration: none; color: var(--secondary); letter-spacing: -1px; }
        .logo span { color: var(--primary); }
        .nav-actions { display: flex; gap: 15px; align-items: center; }
        .btn-reg { background: var(--primary); color: white; border: none; padding: 10px 24px; border-radius: 50px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-reg:hover { background: var(--primary-dark); transform: scale(1.05); }

        /* Sections Handling */
        .page-section { display: none; padding: 40px 8%; min-height: 70vh; animation: fadeIn 0.5s ease; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Unified Hero Section */
        #home-section { padding: 0; }
        .hero { height: 450px; background: linear-gradient(45deg, rgba(233, 30, 99, 0.8), rgba(31, 41, 55, 0.8)), url('https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1500&auto=format&fit=crop'); background-size: cover; background-position: center; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; text-align: center; }
        .hero h1 { font-size: clamp(32px, 5vw, 55px); margin-bottom: 10px; }
        .hero p { font-size: 18px; opacity: 0.9; max-width: 600px; }

        /* Success Stories Theme */
        .stories-bar { background: var(--white); padding: 30px 0; border-bottom: 1px solid #eee; }
        .story-scroller { display: flex; gap: 20px; overflow-x: auto; padding: 10px 8%; scrollbar-width: none; }
        .story-item { background: #fff5f8; padding: 15px 25px; border-radius: 100px; border: 1px solid #fce4ec; white-space: nowrap; color: var(--primary-dark); font-weight: 500; font-size: 14px; box-shadow: 0 2px 5px rgba(0,0,0,0.02); }

        /* Search Theme */
        .search-box { max-width: 700px; margin: -40px auto 40px; background: var(--white); padding: 10px; border-radius: 100px; box-shadow: var(--shadow); display: flex; z-index: 10; position: relative; }
        .search-box input { border: none; padding: 15px 30px; width: 100%; border-radius: 100px; outline: none; font-size: 16px; }

        /* Card Theme */
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; list-style: none; padding: 0; }
        .card { background: var(--white); border-radius: 20px; overflow: hidden; box-shadow: var(--shadow); transition: 0.4s; border: 1px solid #f1f5f9; position: relative; }
        .card:hover { transform: translateY(-10px); }
        .card img { width: 100%; height: 320px; object-fit: cover; }
        
        .badge-verified { position: absolute; top: 15px; right: 15px; background: var(--accent); color: white; padding: 5px 12px; border-radius: 50px; font-size: 11px; font-weight: bold; box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3); }
        
        .card-content { padding: 20px; text-align: center; }
        .card-content h3 { margin: 0; color: var(--secondary); font-size: 22px; }
        .card-content p { color: #64748b; margin: 8px 0; font-size: 14px; }
        
        .btn-wa { display: block; background: #25d366; color: white; text-decoration: none; padding: 12px; border-radius: 12px; font-weight: bold; margin-top: 15px; transition: 0.3s; }
        .btn-wa:hover { background: #1eb954; box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3); }

        /* Admin & Forms (Cleaned) */
        .admin-box { background: #eff6ff; border: 2px dashed var(--accent); padding: 25px; border-radius: 20px; margin-bottom: 40px; }
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); backdrop-filter: blur(5px); }
        .modal-content { background: white; margin: 2% auto; padding: 35px; width: 90%; max-width: 500px; border-radius: 25px; box-shadow: 0 20px 40px rgba(0,0,0,0.2); }
        
        input, select { width: 100%; padding: 14px; margin: 10px 0; border: 1px solid #e2e8f0; border-radius: 12px; font-size: 15px; }

        footer { background: var(--secondary); color: white; padding: 50px 8% 30px; text-align: center; margin-top: 60px; }
        .footer-nav { display: flex; justify-content: center; gap: 30px; margin: 20px 0; }
        .footer-nav a { color: #94a3b8; text-decoration: none; cursor: pointer; font-size: 14px; transition: 0.3s; }
        .footer-nav a:hover { color: var(--primary); }
    </style>
</head>
<body>

    <nav class="navbar">
        <a onclick="showSection('home-section')" class="logo">Nikah<span>Fix</span></a>
        <div class="nav-actions">
            <a onclick="showSection('browse-section')" style="cursor:pointer; font-weight:600; margin-right:15px; color:var(--secondary);">Browse</a>
            <button class="btn-reg" onclick="openModal()">Register Free</button>
        </div>
    </nav>

    <div id="home-section" class="page-section active">
        <header class="hero">
            <h1>Connecting <span>Hearts</span> Halal Way</h1>
            <p>Pakistan's most trusted and free matrimonial platform. Your journey to a perfect life partner starts here.</p>
            <button class="btn-reg" style="margin-top:25px; padding:15px 40px; font-size:18px;" onclick="showSection('browse-section')">Explore Profiles</button>
        </header>

        <div class="stories-bar">
            <div class="story-scroller">
                <div class="story-item">‚ù§Ô∏è Ahmed found Sara from Lahore</div>
                <div class="story-item">üíç Bilal married Hina in 2 months</div>
                <div class="story-item">‚ú® Verified matches are safer</div>
                <div class="story-item">‚≠ê 1000+ Success Stories</div>
            </div>
        </div>
    </div>

    <div id="browse-section" class="page-section">
        <div class="search-box">
            <input type="text" id="searchInput" onkeyup="search()" placeholder="Search by city, caste, or name...">
        </div>

        <div class="container" style="max-width:1200px; margin:auto;">
            <div id="adminArea" style="display:none;" class="admin-box">
                <h3 style="margin-top:0; color:var(--accent);">Admin Dashboard: Pending</h3>
                <ul id="pendingUsers" class="grid"></ul>
                <button onclick="adminLogout()" class="btn-reg" style="background:#64748b; margin-top:20px;">Logout Admin</button>
            </div>

            <ul id="users" class="grid"></ul>
        </div>
    </div>

    <div id="privacy-section" class="page-section">
        <div style="max-width:800px; margin:auto; background:white; padding:40px; border-radius:20px;">
            <h1 style="color:var(--primary);">Privacy Policy</h1>
            <p>At NikahFix, we prioritize your security. Your data is never sold to third parties.</p>
            <p>1. Only approved profiles are visible.<br>2. You can request profile deletion anytime.<br>3. We use manual verification.</p>
            <button class="btn-reg" onclick="showSection('home-section')">Back Home</button>
        </div>
    </div>

    <footer>
        <div class="logo" style="color:white">Nikah<span>Fix</span></div>
        <div class="footer-nav">
            <a onclick="showSection('home-section')">Home</a>
            <a onclick="showSection('browse-section')">Find Match</a>
            <a onclick="showSection('privacy-section')">Privacy Policy</a>
            <a onclick="adminLogin()">Admin Login</a>
        </div>
        <p style="opacity: 0.5; font-size: 13px; margin-top: 30px;">&copy; 2026 NikahFix Matrimonial. Built for the Ummah.</p>
    </footer>

    <div id="regModal" class="modal">
        <div class="modal-content">
            <h2 style="text-align:center; color:var(--primary); margin:0 0 20px 0;">Create Profile</h2>
            <form id="regForm">
                <label style="font-size:13px; color:#666;">Profile Photo</label>
                <input type="file" id="profilePic" accept="image/*" required>
                <input type="text" id="fullname" placeholder="Full Name" required>
                <div style="display:flex; gap:10px;">
                    <input type="number" id="age" placeholder="Age" min="18" required>
                    <select id="gender"><option value="Male">Male</option><option value="Female">Female</option></select>
                </div>
                <input type="text" id="whatsapp" placeholder="WhatsApp (92300...)" required>
                <input type="text" id="cityInput" placeholder="City" required>
                <input type="text" id="casteInput" placeholder="Caste" required>
                <button type="submit" id="subBtn" class="btn-reg" style="width:100%; padding:15px; margin-top:10px;">Submit for Approval</button>
                <p onclick="closeModal()" style="text-align:center; cursor:pointer; color:#94a3b8; font-size:14px; margin-top:15px;">Close Window</p>
            </form>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getDatabase, ref, push, onValue, update, remove } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCtKxg4q4zE7WfXdvDzEd4cpBfJMFzwKrQ",
            authDomain: "nikahfix-a6980.firebaseapp.com",
            projectId: "nikahfix-a6980",
            databaseURL: "https://nikahfix-a6980-default-rtdb.firebaseio.com",
            storageBucket: "nikahfix-a6980.firebasestorage.app",
            messagingSenderId: "742799659285",
            appId: "1:742799659285:web:dc111dc24654ac2c71991c"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const usersRef = ref(db, 'profiles');

        // SECTION SWITCHER
        window.showSection = (id) => {
            document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            window.scrollTo(0,0);
        };

        // SUBMIT FORM
        document.getElementById('regForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const btn = document.getElementById('subBtn'); btn.innerText = "Processing..."; btn.disabled = true;
            const file = document.getElementById('profilePic').files[0];
            const reader = new FileReader();
            reader.onload = (ev) => {
                push(usersRef, {
                    img: ev.target.result, name: document.getElementById('fullname').value,
                    age: document.getElementById('age').value, gender: document.getElementById('gender').value,
                    wa: document.getElementById('whatsapp').value, city: document.getElementById('cityInput').value,
                    caste: document.getElementById('casteInput').value, status: "pending", 
                    verified: false, timestamp: Date.now()
                }).then(() => { alert("Profile submitted for Admin review!"); location.reload(); });
            };
            reader.readAsDataURL(file);
        });

        // SYNC DATA
        onValue(usersRef, (snapshot) => {
            const list = document.getElementById('users');
            const pendingList = document.getElementById('pendingUsers');
            list.innerHTML = ""; pendingList.innerHTML = "";
            const data = snapshot.val();
            const isAdmin = localStorage.getItem('nikahAdmin') === 'true';

            if(data) {
                Object.keys(data).reverse().forEach(key => {
                    const u = data[key];
                    const card = `
                        <li class="card">
                            ${u.verified ? '<div class="badge-verified">‚úÖ Verified</div>' : ''}
                            <img src="${u.img}">
                            <div class="card-content">
                                <h3>${u.name}</h3>
                                <p><strong>${u.age} Yrs | ${u.gender}</strong></p>
                                <p>üìç ${u.city} | ${u.caste}</p>
                                ${u.status === 'approved' ? `<a href="https://wa.me/${u.wa}" target="_blank" class="btn-wa">Contact on WhatsApp</a>` : ''}
                                ${isAdmin ? `
                                    <div style="margin-top:15px; display:flex; gap:5px;">
                                        ${u.status === 'pending' ? `<button onclick="approve('${key}')" style="background:green; color:white; border:none; padding:5px; flex:1; cursor:pointer; border-radius:5px;">Approve</button>` : ''}
                                        <button onclick="toggleVerify('${key}', ${u.verified})" style="background:blue; color:white; border:none; padding:5px; flex:1; cursor:pointer; border-radius:5px;">Verify</button>
                                        <button onclick="del('${key}')" style="background:red; color:white; border:none; padding:5px; flex:1; cursor:pointer; border-radius:5px;">Delete</button>
                                    </div>` : ''}
                            </div>
                        </li>`;
                    if(u.status === "approved") list.innerHTML += card;
                    else if(isAdmin && u.status === "pending") pendingList.innerHTML += card;
                });
            }
        });

        // ADMIN ACTIONS
        window.approve = (k) => update(ref(db, 'profiles/'+k), {status:'approved'});
        window.toggleVerify = (k, v) => update(ref(db, 'profiles/'+k), {verified: !v});
        window.del = (k) => confirm("Delete?") && remove(ref(db, 'profiles/'+k));
        window.adminLogin = () => { if(prompt("Password:") === "nikah786") { localStorage.setItem('nikahAdmin', 'true'); location.reload(); } };
        window.adminLogout = () => { localStorage.removeItem('nikahAdmin'); location.reload(); };
        if(localStorage.getItem('nikahAdmin') === 'true') document.getElementById('adminArea').style.display = "block";
    </script>

    <script>
        function openModal() { document.getElementById('regModal').style.display = "block"; }
        function closeModal() { document.getElementById('regModal').style.display = "none"; }
        function search() {
            let q = document.getElementById('searchInput').value.toLowerCase();
            let cards = document.getElementsByClassName('card');
            for (let c of cards) { c.style.display = c.innerText.toLowerCase().includes(q) ? "block" : "none"; }
        }
    </script>
</body>
</html>
